<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>แดชบอร์ด - ระบบแจ้งเตือนระดับน้ำเกลือ</title>
  <link rel="stylesheet" href="styles.css">
  <!-- Role-based access control must load before language to redirect unauthorized users -->
  <script src="auth.js"></script>
  <!-- Include language/theme management before other scripts -->
  <script src="lang.js"></script>
</head>
<body>
  <!-- Navigation bar for multi-page navigation with language/theme controls -->
  <nav class="navbar">
    <div class="nav-links">
      <a href="index.html" class="nav-link" data-i18n="navHome">หน้าแรก</a>
      <a href="dashboard.html" class="nav-link active" data-i18n="navDashboard">แดชบอร์ด</a>
      <a href="devices.html" class="nav-link" data-i18n="navDevices">อุปกรณ์</a>
      <a href="reports.html" class="nav-link" data-i18n="navReports">รายงาน</a>
      <a href="staff.html" class="nav-link" data-i18n="navStaff">เจ้าหน้าที่</a>
      <a href="patients.html" class="nav-link" data-i18n="navPatients">ผู้ป่วย</a>
      <a href="contact.html" class="nav-link" data-i18n="navContact">ติดต่อเรา</a>
    </div>
    <div class="nav-actions">
      <select id="languageSelect" class="lang-select">
        <option value="th" data-i18n="navLangTh">ไทย</option>
        <option value="en" data-i18n="navLangEn">English</option>
        <option value="la" data-i18n="navLangLa">ລາວ</option>
      </select>
      <button id="darkModeToggle" class="dark-toggle" data-i18n="darkMode">โหมดมืด</button>
    </div>
  </nav>
  <header>
    <!-- Controls container includes building floor buttons and test controls -->
    <div class="controls">
      <!-- Building representation: floors will be generated dynamically -->
      <div id="buildingContainer" class="building"></div>
      <!-- Test controls: choose floor and bed for test -->
      <div class="test-controls">
        <label for="testFloorSelect" data-i18n="selectFloor">เลือกชั้น:</label>
        <select id="testFloorSelect"></select>
        <label for="testBedSelect" data-i18n="selectBed">เลือกเตียง:</label>
        <select id="testBedSelect"></select>
        <button id="testSelectedButton" class="test-button" data-i18n="testButton">ทดสอบ</button>
      </div>
    </div>
  </header>
  <!-- Alert area for general notifications -->
  <div id="alertArea" class="alert hidden"></div>
  <!-- Modal overlay and alert for pop-up notifications -->
  <div id="modalOverlay" class="modal-overlay hidden"></div>
  <div id="modalAlert" class="modal hidden">
    <div id="modalMessage"></div>
    <button id="modalClose" class="modal-close-button">ปิด</button>
  </div>

  <!-- Patient detail modal overlay -->
  <div id="patientModalOverlay" class="modal-overlay hidden"></div>
  <div id="patientModal" class="patient-modal hidden">
    <div class="patient-modal-content">
      <div class="patient-video-wrapper">
        <!-- Video element for webcam feed -->
        <video id="patientVideo" autoplay playsinline muted></video>
        <!-- Canvas overlay for drawing pose skeleton on top of video -->
        <canvas id="poseCanvas" class="pose-canvas"></canvas>
      </div>
      <div class="patient-details-wrapper">
        <h3 data-i18n="patientDetails">รายละเอียดผู้ป่วย</h3>
        <!-- Detection alert area for motion or allergy alerts -->
        <div id="detectionAlert" class="detection-alert hidden"></div>
        <div id="patientInfo" class="patient-info"></div>
        <button id="patientClose" class="modal-close-button" data-i18n="close">ปิด</button>
      </div>
    </div>
  </div>
  <!-- Container for bed cards -->
  <main>
    <div id="bedsContainer" class="beds-grid">
      <!-- Bed cards will be generated here -->
    </div>
  </main>
  <!-- Load MediaPipe Pose and utilities for pose estimation and drawing BEFORE our script -->
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/pose@0.4/pose.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils@0.4/drawing_utils.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils@0.4/camera_utils.js"></script>
  <!-- Our script.js must be loaded after MediaPipe libraries so we can use Pose classes -->
  <script src="script.js"></script>
</body>
</html>